<!DOCTYPE html>
<html>
<head>
    <title>Health News</title>
    <link rel="stylesheet" href="/static/resources.css" />
    <!-- <link rel="stylesheet" href="{{ url_for('static', filename='resources.css') }}"> -->

</head>
<body>
    <nav class="top-nav">
        <button class="back-button" onclick="goBack()">Home</button>
        <a href="#health-news">Health News</a>
        <a href="#emergency-contacts">Emergency Contacts</a>
    </nav>
    <div class="country-dropdown">
        <label for="country">Choose a Country:</label>
        <select id="country" autocomplete="off">
            <option value="ng">Rwanda</option>
            <option value="za">Kenya</option>
            <option value="ng">Nigeria</option>
            <option value="za">Uganda</option>
            <option value="eg">Ethiopia</option>
        </select>
    </div>
    <div id="newsContainer">
        <div class="columns">
            <div class="column" id="column1"></div>
            <div class="column" id="column2"></div>
            <div class="column" id="column3"></div>
        </div>
    </div>
    <button id="fetchButton">Fetch Health News</button>



    <!-- Emergency cintacts -->
    <section id="emergency-contacts" class="emergency-contacts-modal hidden">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Health Emergency Contacts</h2>
            <label for="emergency-country">Select a Country:</label>
            <select id="emergency-country">
                <option value="rw">Rwanda</option>
                <option value="ke">Kenya</option>
                <option value="ng">Nigeria</option>
                <option value="ug">Uganda</option>
                <option value="et">Ethiopia</option>
            </select>
            <div class="emergency-contacts-container">
                <!-- Emergency contacts content will be added here -->
            </div>
        </div>
    </section>
    

    <script>
            document.addEventListener("DOMContentLoaded", () => {
    const countryDropdown = document.getElementById("country");
    const newsContainer = document.getElementById("newsContainer");
    const emergencyContactsModal = document.getElementById("emergency-contacts");
    const emergencyCountryDropdown = document.getElementById("emergency-country");
    const emergencyContactsContainer = document.querySelector(".emergency-contacts-container");

    // Add a click event listener to the "Health Emergency Contacts" link
    const emergencyContactsLink = document.querySelector('a[href="#emergency-contacts"]');
    emergencyContactsLink.addEventListener("click", () => {
        // Show the emergency contacts modal
        emergencyContactsModal.classList.remove("hidden");
    });

    // Close the modal when the close button is clicked
    const closeButton = document.querySelector(".close-button");
    closeButton.addEventListener("click", () => {
        emergencyContactsModal.classList.add("hidden");
    });

    // Populate emergency contacts based on the selected country
    emergencyCountryDropdown.addEventListener("change", () => {
        const selectedCountry = emergencyCountryDropdown.value;
        if (selectedCountry in emergencyContactsData) {
            const contacts = emergencyContactsData[selectedCountry];
            updateEmergencyContacts(contacts);
        }
    });

    function updateEmergencyContacts(contacts) {
        emergencyContactsContainer.innerHTML = `
            <h3>Police Emergency Contacts</h3>
            <p><strong>Police Contacts:</strong> ${contacts.police}</p>
            <p><strong>Police Website:</strong> <a href="${contacts.policeWebsite}" target="_blank">Police Website</a></p>
            <h3>Hospitals Emergency Contacts</h3>
            <p><strong>Hospital Contacts:</strong> ${contacts.hospital}</p>
            <p><strong>Hospital Website:</strong> <a href="${contacts.hospitalWebsite}" target="_blank">Hospital Website</a></p>
        `;
    }

    // Map of countries to emergency contacts data (replace with actual data)
    const emergencyContactsData = {
        rw: {
            police: "112",
            policeWebsite: "https://www.rnp.gov.rw/",
            hospital: "114",
            hospitalWebsite: "https://www.moh.gov.rw/"
        },
        ke: {
            police: "999",
            policeWebsite: "https://www.nationalpolice.go.ke/",
            hospital: "020-2726300",
            hospitalWebsite: "https://www.health.go.ke/"
        },
        ng: {
            police: "112",
            policeWebsite: "https://www.lagosstatepolice.gov.ng/",
            hospital: "0803-123-4567",
            hospitalWebsite: "https://www.lsha.gov.ng/"
        },
        ug: {
            police: "999",
            policeWebsite: "https://www.upf.go.ug/",
            hospital: "999",
            hospitalWebsite: "https://www.health.go.ug/"
        },
        et: {
            police: "991",
            policeWebsite: "https://www.federalpolice.gov.et/",
            hospital: "907",
            hospitalWebsite: "https://www.moh.gov.et/"
        }
    };

    countryDropdown.addEventListener("change", () => {
        const selectedCountry = countryDropdown.value;
        if (selectedCountry in emergencyContactsData) {
            const contacts = emergencyContactsData[selectedCountry];
            updateEmergencyContacts(contacts);
        }
    });

    function updateEmergencyContacts(contacts) {
        const contactsContainer = document.getElementById("emergency-contacts-container");
        contactsContainer.innerHTML = `
            <h3>Police Emergency Contacts</h3>
            <p><strong>Police Contacts:</strong> ${contacts.police}</p>
            <p><strong>Police Website:</strong> <a href="${contacts.policeWebsite}" target="_blank">Police Website</a></p>
            <h3>Hospitals Emergency Contacts</h3>
            <p><strong>Hospital Contacts:</strong> ${contacts.hospital}</p>
            <p><strong>Hospital Website:</strong> <a href="${contacts.hospitalWebsite}" target="_blank">Hospital Website</a></p>
        `;
    }




    countryDropdown.addEventListener("change", () => {
        const selectedCountry = countryDropdown.value;
        if (selectedCountry) {
            const apiKey = "9ea9960aac454f649e6fa5d78e9343be";
            const apiUrl = `https://newsapi.org/v2/top-headlines?category=health&country=${selectedCountry}&apiKey=${apiKey}`;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    // Clear existing content
                    newsContainer.innerHTML = "";

                    // Create columns for each news article
                    data.articles.forEach(article => {
                        const title = article.title;
                        const description = article.description;
                        const source = article.source.name;
                        const url = article.url;

                        const newsElement = createNewsElement(title, description, source, url);
                        newsContainer.appendChild(newsElement);
                    });
                })
                .catch(error => {
                    console.error("Error fetching data:", error);
                });
        }
    });

    // Function to create a news element
    function createNewsElement(title, description, source, url) {
        const newsElement = document.createElement("div");
        newsElement.classList.add("news-article");
        newsElement.innerHTML = `
            <h3>${title}</h3>
            <p>${description}</p>
            <p>Source: ${source}</p>
            <a href="${url}" target="_blank">Read More</a>
        `;
        return newsElement;
    }
});


    </script>
</body>
</html>
